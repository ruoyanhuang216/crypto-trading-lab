# 2026-02-25 â€” End of Day Summary

## Full session recap

Today was the first full development and research session for crypto-trading-lab.
Everything built from scratch: infrastructure, strategies, signals, backtesting,
and the first round of experiments.

---

## What was built

### Infrastructure
- `data/fetch.py` â€” OHLCV from Binance via ccxt with local parquet cache
- `backtesting/metrics.py` â€” 14 equity-curve metrics (Sharpe, Sortino, Calmar,
  max drawdown, return percentiles, win rate, etc.)
- `research_log/` â€” this structured log (daily, findings, roadmap)

### Strategies
- `strategies/` restructured into `single/pairs/arbitrage` Ã— `basic/advanced`
- `strategies/single/basic/moving_average.py` â€” MACrossover (pre-existing)
- `strategies/single/basic/rsi.py` â€” RSIMeanReversion (pre-existing)
- `strategies/single/basic/bollinger_bands.py`:
  - `BollingerMeanReversion` â€” long below lower band, short above upper band
  - `BollingerBreakout` â€” long above upper band, short below lower band

### Signals
- `signals/base.py` â€” BaseSignal abstract class
- `signals/trend/adx.py` â€” ADXTrend (Wilder's ADX + DI, emits trend_dir)
- `signals/trend/ma_slope.py` â€” MASlopeTrend (normalised MA slope, emits trend_dir)
- Empty packages ready: `signals/volatility/`, `signals/regime/`

### Notebooks
| Notebook | Contents |
|---|---|
| `bollinger_backtest.ipynb` | Bollinger strategy comparison + market correlation analysis |
| `trend_signals_backtest.ipynb` | Signal visualisation, filtered breakout backtest, prediction precision |
| `meanreversion_trend_filter.ipynb` | P1 experiment: filters on MeanReversion, multi-period heatmaps |

---

## Confirmed findings (F1â€“F5)

### F1 â€” MeanReversion outperforms Breakout on 1h BTC Janâ€“Mar 2024
- MeanReversion Sharpe ~2.0, Breakout Sharpe ~0.75 in that window
- **Caveat (F4):** this was period-specific, not structural

### F2 â€” Lagging trend filters hurt BollingerBreakout
- ADX and MA slope filters removed trades right at the entry edge
- Root cause: breakout strategies need early entry; lagging indicators confirm
  trends too late
- **Implication:** these signals should not be used as breakout entry filters

### F3 â€” Trend signals have sub-random directional accuracy at 1h
- Both ADXTrend and MASlopeTrend: ~0.47 directional accuracy on next bar
- Accuracy degrades further at 4, 12, 24-bar horizons
- Tightening thresholds reduces coverage without improving precision
- **Implication:** signals are regime classifiers, not directional forecasters

### F4 â€” BollingerMeanReversion is highly period-dependent
- Janâ€“Mar 2024: +15.9% return, Sharpe ~2.0 (ranging pre-bull market)
- Janâ€“Jun 2024: -9.1% return, Sharpe ~-0.76 (destroyed by Q2 bull run)
- **Implication:** single-period results are unreliable; walk-forward testing is essential

### F5 â€” Trend filters did NOT improve BollingerMeanReversion (P1 hypothesis rejected)
- All 4 filter variants underperformed the unfiltered baseline on return and Sharpe
- `ADX + aligned` was closest to unfiltered (-10.0% vs -9.1%) and did reduce
  max drawdown (-11.9% vs -17.1%)
- **Implication:** filters have value as a risk management tool (drawdown reduction)
  but cannot fix a strategy that is structurally misaligned with the market regime

---

## Multi-period analysis (Â§6â€“7 of meanreversion_trend_filter.ipynb)

5 periods tested spanning 2023â€“2024:

| Period | Regime | MR Unfiltered | MR ADX+aligned | Best filter? |
|---|---|---|---|---|
| 2023 Q2-Q3 | Bear/ranging | TBD | TBD | TBD |
| 2024 Q1 | Pre-halving | TBD | TBD | TBD |
| 2024 Q2 | Bull run | TBD | TBD | TBD |
| 2024 Q3 | Correction | TBD | TBD | TBD |
| 2024 Q4 | Bull to 100k | TBD | TBD | TBD |

> **Note:** TBD entries to be filled after running the notebook.
> The Sharpe heatmap (Â§7) is the primary output to record here next session.

---

## Key insight of the day

> **Regime matters more than parameter tuning.**
>
> The same strategy with the same parameters can produce Sharpe ~2 in one quarter
> and Sharpe ~-0.76 in the next. Until we have a robust way to identify which
> regime we are in â€” and either adapt the strategy or sit out â€” optimising
> parameters is premature and misleading.
>
> This makes **walk-forward validation (P4)** and **regime detection (signals/regime/)**
> the most important next investments.

---

## Open questions going into next session

1. What do the multi-period heatmaps show? (run the notebook)
2. Does long-only MeanReversion (P1b) hold up better across regimes?
3. Does a 200-bar MA as a high-level trend switch improve regime selection?
4. Do the signals have better predictive power on 4h/daily bars (P3)?
5. How much data is needed for a meaningful walk-forward test?

---

## Roadmap status at EOD

| ID | Priority | Status |
|---|---|---|
| P1 | Apply trend filters to MeanReversion | âœ… Complete â€” hypothesis rejected |
| P1b | Long-only MeanReversion variant | ðŸ†• New â€” next candidate |
| P2 | Volatility signals (BB width, ATR) | Pending |
| P3 | Test signals on 4h/daily timeframes | Pending |
| P4 | Walk-forward validation engine | ðŸ”º Elevated â€” most urgent |
| P5 | Regime-aware advanced strategy | Pending (depends P2, P4) |
| P6 | Per-trade metrics | Pending |
| P7 | Optuna parameter optimisation | Pending (depends P4) |
